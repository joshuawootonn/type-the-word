import { signIn, signOut, useSession } from 'next-auth/react'
import * as DropdownMenu from '@radix-ui/react-dropdown-menu'
import Link from 'next/link'
import { useRouter } from 'next/router'

export function Navigation() {
    const { data: sessionData } = useSession()

    const router = useRouter()
    return (
        <nav className="mx-auto mb-2 flex w-full items-center justify-between pt-4 lg:pt-8">
            <Link
                className={'svg-outline relative'}
                href={'/'}
                aria-label={'Type the Word logo'}
            >
                <svg
                    width="180"
                    viewBox="0 0 103 19"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <path
                        d="M6.65176 5.4854V6.9924H4.60576V13.2074H2.72476V6.9924H0.678761V5.4854H6.65176ZM13.6458 7.0694L9.79578 16.1224H7.77178L9.17978 12.9984L6.68278 7.0694H8.78378L10.2028 10.9084L11.6108 7.0694H13.6458ZM15.987 7.9384C16.1703 7.6524 16.4233 7.4214 16.746 7.2454C17.0686 7.0694 17.4463 6.9814 17.879 6.9814C18.385 6.9814 18.8433 7.10973 19.254 7.3664C19.6646 7.62306 19.9873 7.98973 20.222 8.4664C20.464 8.94306 20.585 9.49673 20.585 10.1274C20.585 10.7581 20.464 11.3154 20.222 11.7994C19.9873 12.2761 19.6646 12.6464 19.254 12.9104C18.8433 13.1671 18.385 13.2954 17.879 13.2954C17.4536 13.2954 17.076 13.2074 16.746 13.0314C16.4233 12.8554 16.1703 12.6281 15.987 12.3494V16.1334H14.106V7.0694H15.987V7.9384ZM18.671 10.1274C18.671 9.65806 18.539 9.2914 18.275 9.0274C18.0183 8.75606 17.6993 8.6204 17.318 8.6204C16.944 8.6204 16.625 8.75606 16.361 9.0274C16.1043 9.29873 15.976 9.66906 15.976 10.1384C15.976 10.6077 16.1043 10.9781 16.361 11.2494C16.625 11.5207 16.944 11.6564 17.318 11.6564C17.692 11.6564 18.011 11.5207 18.275 11.2494C18.539 10.9707 18.671 10.5967 18.671 10.1274ZM27.1378 10.0394C27.1378 10.2154 27.1268 10.3987 27.1048 10.5894H22.8478C22.8771 10.9707 22.9981 11.2641 23.2108 11.4694C23.4308 11.6674 23.6985 11.7664 24.0138 11.7664C24.4831 11.7664 24.8095 11.5684 24.9928 11.1724H26.9948C26.8921 11.5757 26.7051 11.9387 26.4338 12.2614C26.1698 12.5841 25.8361 12.8371 25.4328 13.0204C25.0295 13.2037 24.5785 13.2954 24.0798 13.2954C23.4785 13.2954 22.9431 13.1671 22.4738 12.9104C22.0045 12.6537 21.6378 12.2871 21.3738 11.8104C21.1098 11.3337 20.9778 10.7764 20.9778 10.1384C20.9778 9.5004 21.1061 8.94306 21.3628 8.4664C21.6268 7.98973 21.9935 7.62306 22.4628 7.3664C22.9321 7.10973 23.4711 6.9814 24.0798 6.9814C24.6738 6.9814 25.2018 7.10606 25.6638 7.3554C26.1258 7.60473 26.4851 7.9604 26.7418 8.4224C27.0058 8.8844 27.1378 9.4234 27.1378 10.0394ZM25.2128 9.5444C25.2128 9.22173 25.1028 8.96506 24.8828 8.7744C24.6628 8.58373 24.3878 8.4884 24.0578 8.4884C23.7425 8.4884 23.4748 8.58006 23.2548 8.7634C23.0421 8.94673 22.9101 9.20706 22.8588 9.5444H25.2128ZM33.4422 11.6124V13.2074H32.4852C31.8032 13.2074 31.2715 13.0424 30.8902 12.7124C30.5088 12.3751 30.3182 11.8287 30.3182 11.0734V8.6314H29.5702V7.0694H30.3182V5.5734H32.1992V7.0694H33.4312V8.6314H32.1992V11.0954C32.1992 11.2787 32.2432 11.4107 32.3312 11.4914C32.4192 11.5721 32.5658 11.6124 32.7712 11.6124H33.4422ZM38.0429 7.0034C38.7469 7.0034 39.3116 7.23806 39.7369 7.7074C40.1623 8.1694 40.3749 8.8074 40.3749 9.6214V13.2074H38.5049V9.8744C38.5049 9.46373 38.3986 9.14473 38.1859 8.9174C37.9733 8.69006 37.6873 8.5764 37.3279 8.5764C36.9686 8.5764 36.6826 8.69006 36.4699 8.9174C36.2573 9.14473 36.1509 9.46373 36.1509 9.8744V13.2074H34.2699V5.0674H36.1509V7.8944C36.3416 7.62306 36.6019 7.40673 36.9319 7.2454C37.2619 7.08406 37.6323 7.0034 38.0429 7.0034Z"
                        className={'fill-gray-500 dark:fill-gray-400'}
                    />
                    <path
                        d="M47.5912 10.0394C47.5912 10.2154 47.5802 10.3987 47.5582 10.5894H43.3012C43.3306 10.9707 43.4516 11.2641 43.6642 11.4694C43.8842 11.6674 44.1519 11.7664 44.4672 11.7664C44.9366 11.7664 45.2629 11.5684 45.4462 11.1724H47.4482C47.3456 11.5757 47.1586 11.9387 46.8872 12.2614C46.6232 12.5841 46.2896 12.8371 45.8862 13.0204C45.4829 13.2037 45.0319 13.2954 44.5332 13.2954C43.9319 13.2954 43.3966 13.1671 42.9272 12.9104C42.4579 12.6537 42.0912 12.2871 41.8272 11.8104C41.5632 11.3337 41.4312 10.7764 41.4312 10.1384C41.4312 9.5004 41.5596 8.94306 41.8162 8.4664C42.0802 7.98973 42.4469 7.62306 42.9162 7.3664C43.3856 7.10973 43.9246 6.9814 44.5332 6.9814C45.1272 6.9814 45.6552 7.10606 46.1172 7.3554C46.5792 7.60473 46.9386 7.9604 47.1952 8.4224C47.4592 8.8844 47.5912 9.4234 47.5912 10.0394ZM45.6662 9.5444C45.6662 9.22173 45.5562 8.96506 45.3362 8.7744C45.1162 8.58373 44.8412 8.4884 44.5112 8.4884C44.1959 8.4884 43.9282 8.58006 43.7082 8.7634C43.4956 8.94673 43.3636 9.20706 43.3122 9.5444H45.6662ZM61.1006 5.4854L59.0876 13.2074H56.8106L55.5786 8.1254L54.3026 13.2074H52.0256L50.0676 5.4854H52.0806L53.1916 11.1064L54.5666 5.4854H56.6346L57.9546 11.1064L59.0766 5.4854H61.1006ZM64.618 13.2954C64.0166 13.2954 63.474 13.1671 62.99 12.9104C62.5133 12.6537 62.1356 12.2871 61.857 11.8104C61.5856 11.3337 61.45 10.7764 61.45 10.1384C61.45 9.50773 61.5893 8.95406 61.868 8.4774C62.1466 7.9934 62.528 7.62306 63.012 7.3664C63.496 7.10973 64.0386 6.9814 64.64 6.9814C65.2413 6.9814 65.784 7.10973 66.268 7.3664C66.752 7.62306 67.1333 7.9934 67.412 8.4774C67.6906 8.95406 67.83 9.50773 67.83 10.1384C67.83 10.7691 67.687 11.3264 67.401 11.8104C67.1223 12.2871 66.7373 12.6537 66.246 12.9104C65.762 13.1671 65.2193 13.2954 64.618 13.2954ZM64.618 11.6674C64.9773 11.6674 65.2816 11.5354 65.531 11.2714C65.7876 11.0074 65.916 10.6297 65.916 10.1384C65.916 9.64706 65.7913 9.2694 65.542 9.0054C65.3 8.7414 64.9993 8.6094 64.64 8.6094C64.2733 8.6094 63.969 8.7414 63.727 9.0054C63.485 9.26206 63.364 9.63973 63.364 10.1384C63.364 10.6297 63.4813 11.0074 63.716 11.2714C63.958 11.5354 64.2586 11.6674 64.618 11.6674ZM70.4889 8.0924C70.7089 7.75506 70.9839 7.49106 71.3139 7.3004C71.6439 7.1024 72.0105 7.0034 72.4139 7.0034V8.9944H71.8969C71.4275 8.9944 71.0755 9.09706 70.8409 9.3024C70.6062 9.5004 70.4889 9.8524 70.4889 10.3584V13.2074H68.6079V7.0694H70.4889V8.0924ZM72.7189 10.1274C72.7189 9.49673 72.8363 8.94306 73.0709 8.4664C73.3129 7.98973 73.6393 7.62306 74.0499 7.3664C74.4606 7.10973 74.9189 6.9814 75.4249 6.9814C75.8283 6.9814 76.1949 7.06573 76.5249 7.2344C76.8623 7.40306 77.1263 7.6304 77.3169 7.9164V5.0674H79.1979V13.2074H77.3169V12.3274C77.1409 12.6207 76.8879 12.8554 76.5579 13.0314C76.2353 13.2074 75.8576 13.2954 75.4249 13.2954C74.9189 13.2954 74.4606 13.1671 74.0499 12.9104C73.6393 12.6464 73.3129 12.2761 73.0709 11.7994C72.8363 11.3154 72.7189 10.7581 72.7189 10.1274ZM77.3169 10.1384C77.3169 9.66906 77.1849 9.29873 76.9209 9.0274C76.6643 8.75606 76.3489 8.6204 75.9749 8.6204C75.6009 8.6204 75.2819 8.75606 75.0179 9.0274C74.7613 9.2914 74.6329 9.65806 74.6329 10.1274C74.6329 10.5967 74.7613 10.9707 75.0179 11.2494C75.2819 11.5207 75.6009 11.6564 75.9749 11.6564C76.3489 11.6564 76.6643 11.5207 76.9209 11.2494C77.1849 10.9781 77.3169 10.6077 77.3169 10.1384Z"
                        fill="black"
                        className="dark:invert"
                    />
                    <path
                        d="M40.5 2.70735H41.5V16.7073H40.5V2.70735Z"
                        fill="black"
                        className="dark:invert"
                    />
                    <path
                        d="M91.8822 2.98633V18.2925M94.0688 3.87622H99.5353M94.0688 6.18994H99.5353M94.0688 8.50366H99.5353M94.0688 10.8174H99.5353M94.0688 12.9531H99.5353M84.2291 3.87622H89.6956M84.2291 6.18994H89.6956M84.2291 8.50366H89.6956M84.2291 10.8174H89.6956M84.2291 12.9531H89.6956"
                        stroke="black"
                        className="dark:invert"
                    />
                    <path
                        d="M81.9055 15.9157V1.2074H89.7049C91.0108 1.2074 91.8814 1.7455 91.8814 3.00109C91.8814 1.7455 92.607 1.2074 94.058 1.2074H101.676V15.9157H94.058C92.4256 15.9157 91.8814 17.53 91.8814 18.4268C91.8814 17.53 91.1559 15.9157 89.3421 15.9157H81.9055Z"
                        stroke="black"
                        className="dark:invert"
                    />
                </svg>
            </Link>
            <div className="flex flex-col gap-4">
                {sessionData ? (
                    <DropdownMenu.Root>
                        <DropdownMenu.Trigger asChild>
                            <button
                                className="svg-outline relative border-2 border-black px-3 py-1 font-medium text-black dark:border-white dark:text-white"
                                aria-label="Customise options"
                            >
                                {sessionData.user.name}
                            </button>
                        </DropdownMenu.Trigger>

                        <DropdownMenu.Content
                            className="border-2 border-black text-black dark:border-white dark:text-white"
                            sideOffset={-2}
                            align="end"
                        >
                            <DropdownMenu.Item asChild={true}>
                                <Link
                                    className="text-medium block cursor-pointer px-3 py-1 no-underline outline-none focus:bg-black focus:text-white dark:focus:bg-white dark:focus:text-black"
                                    href={'/history'}
                                >
                                    History
                                </Link>
                            </DropdownMenu.Item>
                            <DropdownMenu.Item
                                className="cursor-pointer px-3 py-1 font-medium outline-none focus:bg-black focus:text-white dark:focus:bg-white dark:focus:text-black"
                                onClick={() => void signOut()}
                            >
                                Sign out
                            </DropdownMenu.Item>
                        </DropdownMenu.Content>
                    </DropdownMenu.Root>
                ) : (
                    <button
                        className="svg-outline relative border-2 border-black px-3 py-1 font-semibold text-black dark:border-white dark:text-white"
                        onClick={() => void signIn()}
                    >
                        Sign in
                    </button>
                )}
            </div>
        </nav>
    )
}
